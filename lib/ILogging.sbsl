#!/usr/bin/executor

@Глобально
структура ВремяИсполнения

    пер ВремяНачала: ДатаВремя
    пер ВремяОкончания: ДатаВремя
    пер Длительность: Длительность
;

@Глобально
структура ВремяИсполненияОпераций

    знч Операции: Соответствие<Строка, ВремяИсполнения>

    @Глобально
    метод НачатьЗамер(ИмяОперации: Строка)
        знч ВремяИсполнения = новый ВремяИсполнения(ДатаВремя.Сейчас())
        Операции.Вставить(ИмяОперации, ВремяИсполнения)
    ;

    @Глобально
    метод ЗавершитьЗамер(ИмяОперации: Строка) : Длительность
        знч Сейчас = ДатаВремя.Сейчас()
        знч Операция = Операции.ПолучитьИлиУмолчание(ИмяОперации, Неопределено)
        если Операция == Неопределено
            возврат 0мс
        ;
        Операция.ВремяОкончания = Сейчас
        Операция.Длительность = Операция.ВремяОкончания - Операция.ВремяНачала
        Консоль.Записать("\нДлительность операции %{ИмяОперации} составляет %{Операция.Длительность.Представление("с")} сек.")

        возврат Операция.Длительность
    ;
;